<p-table
  [value]="products"
  [tableStyle]="{ 'min-width': '50rem' }"
  dataKey="code"
>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="code" id="code">
        Code<p-sortIcon field="code"></p-sortIcon>
      </th>
      <th pSortableColumn="name" id="name">
        Name<p-sortIcon field="name"></p-sortIcon>
      </th>
      <th pSortableColumn="category" id="category">
        Category<p-sortIcon field="category"></p-sortIcon>
      </th>
      <th pSortableColumn="quantity" id="quantity">
        Quantity<p-sortIcon field="quantity"></p-sortIcon>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product let-expanded="expanded">
    <tr>
      <td>
        <button
          type="button"
          pButton
          pRipple
          [pRowToggler]="product"
          class="p-button-text p-button-rounded p-button-plain"
        ></button>
      </td>
      <td>{{ product.code }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.category }}</td>
      <td>{{ product.quantity }}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="rowexpansion" let-product let-expanded="expanded">
    <tr>
      <td colspan="7">
        <div class="p-3">
          <p-table [value]="product.orders" dataKey="id">
            <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="id" id="price">
                  Id <p-sortIcon field="price"></p-sortIcon>
                </th>
                <th pSortableColumn="customer" id="customer">
                  Customer <p-sortIcon field="customer"></p-sortIcon>
                </th>
                <th pSortableColumn="date" id="date">
                  Date <p-sortIcon field="date"></p-sortIcon>
                </th>
                <th pSortableColumn="amount" id="amount">
                  Amount <p-sortIcon field="amount"></p-sortIcon>
                </th>
                <th pSortableColumn="status" id="status">
                  Status <p-sortIcon field="status"></p-sortIcon>
                </th>
                <th id="style" style="width: 4rem"></th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-order>
              <tr>
                <td>{{ order.id }}</td>
                <td>{{ order.customer }}</td>
                <td>{{ order.id }}</td>
                <td>{{ order.amount | currency : "USD" }}</td>
                <td><p-button type="button" icon="pi pi-plus"></p-button></td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="6">There are no order for this product yet.</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>
